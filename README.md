# åœ°é“ç–æ•£å¹³å°é’¢æ”¯æ¶é•¿åº¦ä¼˜åŒ–å™¨

[![Python CI](https://github.com/wangleiwps/metro-esc-platform-ga-optimizer/actions/workflows/python-ci.yml/badge.svg?branch=feature/ga-core)](https://github.com/wangleiwps/metro-esc-platform-ga-optimizer/actions/workflows/python-ci.yml)
[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ã€Šåœ°é“ç–æ•£å¹³å°æ— è½¨åŒ–æ–½å·¥æ–¹æ³•åŠè¾…åŠ©å®‰è£…è®¾å¤‡ç ”ç©¶ã€‹SCIè®ºæ–‡çš„é…å¥—ä»£ç å®ç°ï¼Œä¸“æ³¨äºé’¢æ”¯æ¶é•¿åº¦ä¼˜åŒ–é—®é¢˜ã€‚

### ğŸ¯ æ ¸å¿ƒåˆ›æ–°ç‚¹

- **åŠ¨æ€å®‰å…¨ä½™é‡è®¡ç®—**ï¼šåŸºäºÏƒÃ—Î´Ã—ÎµÃ—få››å› å­å…¬å¼çš„è‡ªé€‚åº”å®‰å…¨ä½™é‡ç­–ç•¥
- **æˆæœ¬æ•æ„Ÿèšç±»**ï¼šæ”¹è¿›K-meansç®—æ³•ï¼Œç»¼åˆè€ƒè™‘ææ–™ã€æ ‡å‡†åŒ–å’Œæµªè´¹æˆæœ¬
- **GA-SAæ··åˆä¼˜åŒ–**ï¼šé—ä¼ ç®—æ³•ä¸æ¨¡æ‹Ÿé€€ç«ç®—æ³•çš„ä¸¤é˜¶æ®µä¼˜åŒ–æ¡†æ¶
- **é•¿åº¦æ ‡å‡†åŒ–çº¦æŸ**ï¼šç¡®ä¿æ‰€æœ‰æ ‡å‡†é•¿åº¦ä¸º10mmå€æ•°ï¼Œç¬¦åˆå·¥ç¨‹å®é™…è¦æ±‚
- **æ™ºèƒ½è®¢è´§æ¸…å•**ï¼šè‡ªåŠ¨ç”Ÿæˆé•¿åº¦-æ•°é‡ä¼˜åŒ–çš„CSVè®¢è´§æ¸…å•

## ğŸ”§ æ–°å¢åŠŸèƒ½ï¼šé•¿åº¦æ ‡å‡†åŒ–

### é—®é¢˜è§£å†³
- **åŸé—®é¢˜**ï¼šç®—æ³•ç”Ÿæˆçš„æ ‡å‡†é•¿åº¦åŒ…å«å°æ•°ï¼ˆå¦‚1251.33mmï¼‰ï¼Œä¸ç¬¦åˆé’¢æ¢ç”Ÿäº§æ ‡å‡†
- **è§£å†³æ–¹æ¡ˆ**ï¼šé›†æˆé•¿åº¦æ ‡å‡†åŒ–å™¨ï¼Œç¡®ä¿æ‰€æœ‰æ ‡å‡†é•¿åº¦ä¸º10çš„å€æ•°
- **å·¥ç¨‹ä»·å€¼**ï¼šç¬¦åˆå®é™…ç”Ÿäº§è¦æ±‚ï¼Œä¾¿äºé‡‡è´­å’Œåº“å­˜ç®¡ç†

### ä½¿ç”¨æ–¹æ³•
```bash
# ä½¿ç”¨æ”¹è¿›çš„æ ‡å‡†åŒ–ç®—æ³•
python main_improved.py --demo --compare --output results/

# å¤„ç†å®¢æˆ·é‡‡è´­è¡¨
python data_converter.py --input å®¢æˆ·é‡‡è´­è¡¨.csv
python main_improved.py --input å®¢æˆ·é‡‡è´­è¡¨_converted.csv --compare --output results/

# æ¼”ç¤ºæ ‡å‡†åŒ–æ•ˆæœ
python demo_standardized_lengths.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- NumPy, Pandas, Matplotlib
- è¯¦è§ `requirements.txt`

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### è¿è¡Œç¤ºä¾‹

```bash
# æ¼”ç¤ºæ¨¡å¼ - ä½¿ç”¨å†…ç½®æµ‹è¯•æ•°æ®
python main.py --demo --output results/

# ç®—æ³•æ¯”è¾ƒæ¨¡å¼ - å¯¹æ¯”GAã€SAã€GA-SAä¸‰ç§ç®—æ³•
python main.py --demo --compare --output results/

# ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®
python main.py --input your_data.csv --algorithm ga --output results/

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
python main.py --demo --compare --output results/ --verbose
```

## ğŸ“Š ç®—æ³•æ€§èƒ½

åŸºäº50ä¸ªé’¢æ”¯æ¶çš„æµ‹è¯•æ•°æ®ï¼š

| ç®—æ³• | æˆæœ¬èŠ‚çº¦ | æµªè´¹å‡å°‘ | è§„æ ¼å‡å°‘ | è¿è¡Œæ—¶é—´ |
|------|----------|----------|----------|----------|
| GA | 12.57% | 22.36% | 50% | ~30s |
| SA | 22.99% | 121.01% | 65% | ~25s |
| GA-SA | 13.10% | 3.03% | 50% | ~45s |

## ğŸ“ é¡¹ç›®ç»“æ„

```
metro-esc-platform-ga-optimizer/
â”œâ”€â”€ src/                    # æ ¸å¿ƒç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ ga.py              # é—ä¼ ç®—æ³•å®ç°
â”‚   â”œâ”€â”€ sa.py              # æ¨¡æ‹Ÿé€€ç«ç®—æ³•å®ç°
â”‚   â””â”€â”€ runner.py          # ç®—æ³•è¿è¡Œå™¨å’Œç»“æœå¤„ç†
â”œâ”€â”€ tests/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_ga.py         # GAç®—æ³•æµ‹è¯•
â”‚   â””â”€â”€ test_sa.py         # SAç®—æ³•æµ‹è¯•
â”œâ”€â”€ main.py                # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt       # é¡¹ç›®ä¾èµ–
â””â”€â”€ .github/workflows/     # CI/CDé…ç½®
```

## ğŸ”¬ ç®—æ³•è¯¦è§£

### åŠ¨æ€å®‰å…¨ä½™é‡è®¡ç®—

```python
safety_margin = base_margin * Ïƒ * Î´ * Îµ * f
```

- **Ïƒ**: æµ‹é‡ç²¾åº¦å› å­ (0.8-1.2)
- **Î´**: æ–½å·¥éš¾åº¦å› å­ (0.9-1.3)  
- **Îµ**: å‡ ä½•å¤æ‚åº¦å› å­ (0.85-1.15)
- **f**: ææ–™ç‰¹æ€§å› å­ (0.95-1.05)

### æˆæœ¬æ•æ„Ÿèšç±»

æ”¹è¿›çš„K-meansç®—æ³•ï¼Œç›®æ ‡å‡½æ•°ï¼š

```
minimize: Î±Ã—ææ–™æˆæœ¬ + Î²Ã—æ ‡å‡†åŒ–æˆæœ¬ + Î³Ã—æµªè´¹æˆæœ¬
```

### GA-SAæ··åˆæ¡†æ¶

1. **é˜¶æ®µ1 - é—ä¼ ç®—æ³•**ï¼šå…¨å±€æœç´¢æœ€ä¼˜è§£ç©ºé—´
2. **é˜¶æ®µ2 - æ¨¡æ‹Ÿé€€ç«**ï¼šå±€éƒ¨ç²¾ç»†ä¼˜åŒ–
3. **ç»“æœèåˆ**ï¼šé€‰æ‹©æœ€ä¼˜è§£ä½œä¸ºæœ€ç»ˆç»“æœ

## ğŸ“ˆ è¾“å‡ºç»“æœ

### CSVè®¢è´§æ¸…å•
- æ ‡å‡†é•¿åº¦è§„æ ¼
- æ¯ç§è§„æ ¼çš„æ•°é‡
- æˆæœ¬ç»Ÿè®¡ä¿¡æ¯
- æµªè´¹åˆ†ææŠ¥å‘Š

### å¯è§†åŒ–å›¾è¡¨
- æˆæœ¬å¯¹æ¯”å›¾
- æ”¹è¿›ç™¾åˆ†æ¯”å›¾
- é•¿åº¦åˆ†å¸ƒç›´æ–¹å›¾
- ä¼˜åŒ–è¿‡ç¨‹æ›²çº¿

### æ€§èƒ½æŠ¥å‘Š
- JSONæ ¼å¼è¯¦ç»†åˆ†æ
- ç®—æ³•æ”¶æ•›æ€§è¯„ä¼°
- å‚æ•°æ•æ„Ÿæ€§åˆ†æ

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_ga.py -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ --cov=src --cov-report=html
```

## ğŸ“š è®ºæ–‡æ”¯æŒ

æœ¬ä»£ç åº“å®Œå…¨æ”¯æŒSCIè®ºæ–‡å®éªŒéœ€æ±‚ï¼š

- âœ… **å¯é‡ç°å®éªŒ**ï¼šå›ºå®šéšæœºç§å­ï¼Œç¡®ä¿ç»“æœä¸€è‡´æ€§
- âœ… **æ€§èƒ½å¯¹æ¯”**ï¼šæ”¯æŒå¤šç®—æ³•å¯¹æ¯”å®éªŒ
- âœ… **ç»Ÿè®¡åˆ†æ**ï¼šæä¾›è¯¦ç»†çš„ç»Ÿè®¡æ•°æ®å’Œæ˜¾è‘—æ€§æ£€éªŒ
- âœ… **å›¾è¡¨ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆè®ºæ–‡æ‰€éœ€çš„å¯¹æ¯”å›¾è¡¨

## ğŸ”§ å¼€å‘

### ä»£ç è´¨é‡

é¡¹ç›®ä½¿ç”¨å®Œæ•´çš„CI/CDæµæ°´çº¿ç¡®ä¿ä»£ç è´¨é‡ï¼š

- **å¤šç‰ˆæœ¬æµ‹è¯•**ï¼šPython 3.8-3.11
- **ä»£ç æ ¼å¼åŒ–**ï¼šblack, isort
- **é™æ€åˆ†æ**ï¼šflake8, mypy
- **å®‰å…¨æ‰«æ**ï¼šbandit, safety
- **æµ‹è¯•è¦†ç›–ç‡**ï¼š>85%

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…**: wangleiwps
- **é‚®ç®±**: wangleiwps@163.com
- **é¡¹ç›®é“¾æ¥**: https://github.com/wangleiwps/metro-esc-platform-ga-optimizer

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºåœ°é“ç–æ•£å¹³å°ä¼˜åŒ–ç ”ç©¶åšå‡ºè´¡çŒ®çš„ç ”ç©¶è€…å’Œå¼€å‘è€…ã€‚

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä¸ºå­¦æœ¯ç ”ç©¶é¡¹ç›®ï¼Œä»£ç ä»…ä¾›ç ”ç©¶å’Œå­¦ä¹ ä½¿ç”¨ã€‚

